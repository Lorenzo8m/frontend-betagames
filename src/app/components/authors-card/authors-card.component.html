<div class="d-flex flex-row justify-content-between">
    <h1>Authors List</h1>
    <button type="button" class="btn btn-success h-50" data-bs-toggle="modal" [attr.data-bs-target]="'#createModal'">Crea <i class="bi bi-plus"></i></button>
</div>

<div *ngFor="let a of listAuthors; index as i">
    <div class="card mb-3">
        <div class="card-header d-flex flex-row justify-content-between">
            Author {{a.id}}
            <div class="d-flex flex-row">
                <i class="bi bi-pencil-square me-2" data-bs-toggle="modal"[attr.data-bs-target]="'#staticBackdrop' + i"></i>
                <i class="bi bi-trash3-fill ms-2" data-bs-toggle="modal" [attr.data-bs-target]="'#deleteStaticBackdrop' + i"></i>
            </div>
        </div>
        <div class="d-flex flrx-row card-body justify-content-between">
            <p class="card-text">Name: <strong class="">{{a.name}}</strong></p>
            <p class="card-text">lastName: <strong class="">{{a.lastname}}</strong></p>
            <p class="card-text">biography: <strong class="">{{a.biography}}</strong></p>
            <p class="card-text">Country: <strong class="">{{a.country}}</strong></p>
        </div>
    </div>
    <!--Modal-->
    <div class="modal fade" id="staticBackdrop{{i}}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="staticBackdropLabel">Author: {{a.name}} {{a.lastname}}</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="mb-3">
                            <label for="EditorsName" class="form-label">Author name</label>
                            <input type="text" class="form-control" id="authorsName" name="authorsName" [(ngModel)]="authorName" >
                            <div id="emailHelp" class="form-text">Actual name: {{a.name}}</div>
                            <label for="EditorsName" class="form-label">Author lastname</label>
                            <input type="text" class="form-control" id="authorsLastname" name="authorsLastname" [(ngModel)]="authorLastname" >
                            <div id="emailHelp" class="form-text">Actual lastname: {{a.lastname}}</div>
                            <label for="EditorsName" class="form-label">Country: </label>
                            <input type="text" class="form-control" id="country" name="country" [(ngModel)]="authorCountry" >
                            <div id="emailHelp" class="form-text">Actual country{{a.country}}</div>
                            <label for="EditorsName" class="form-label" id="biography" name="biography" >Biography</label>
                            <input type="text" class="form-control" id="biography" name="biography" [(ngModel)]="authorBiography">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" data-bs-dismiss="modal" class="btn btn-primary" (click)="saveUpdateAuthors(a.id, authorName, authorLastname, authorCountry, authorBiography)"
                        data-bs-dismiss="modal">Modify</button>
    
                </div>
            </div>
        </div>
    </div>
    <!--Delete Modal-->
    <div class="modal fade" id="deleteStaticBackdrop{{i}}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Delete Author?</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body d-flex flex-column justify-content-center">
                    <i class="bi bi-exclamation-octagon display-3 text-danger text-center"></i>
                    Attention! You really want to delete the Author {{a.name}} {{a.lastname}}
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal" (click)="deleteAuthors(a.id)">Delete</button>
                </div>
            </div>
        </div>
    </div>
</div>
<!--Create Modal-->
<div class="modal fade" id="createModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="staticBackdropLabel">Create a new author</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="mb-3">
                        <label for="EditorsName" class="form-label">Author name</label>
                        <input type="text" class="form-control" id="authorsName" name="authorsName" [(ngModel)]="name">
                        <label for="EditorsName" class="form-label">Author lastname</label>
                        <input type="text" class="form-control" id="authorsLastname" name="authorsLastname"
                            [(ngModel)]="lastname">
                        <label for="EditorsName" class="form-label">Country</label>
                        <input type="text" class="form-control" id="country" name="country" [(ngModel)]="country">
                        <label for="EditorsName" class="form-label" id="biography" name="biography">Biography</label>
                        <input type="text" class="form-control" id="biography" name="biography"
                            [(ngModel)]="biography">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancella</button>
                <button type="button" data-bs-dismiss="modal" class="btn btn-success"
                    (click)="createAuthors(name, lastname, country, biography)"
                    data-bs-dismiss="modal">Confirm</button>

            </div>
        </div>
    </div>
</div>