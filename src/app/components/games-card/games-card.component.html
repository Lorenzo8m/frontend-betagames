<div class="d-flex flex-row justify-content-between">
    <h1>Games List</h1>
    <button type="button" class="btn btn-success h-50" data-bs-toggle="modal"
        [attr.data-bs-target]="'#createModal'">Create <i class="bi bi-plus"></i></button>
</div>
<div *ngFor="let g of listGame; index as i">
    <div class="card mb-3">
        <div class="card-header d-flex flex-row justify-content-between">
            Game {{g.id}}
            <div class="d-flex flex-row">
                <i class="bi bi-pencil-square me-2" data-bs-toggle="modal" [attr.data-bs-target]="'#staticBackdrop' + i"></i>
                <i class="bi bi-trash3-fill ms-2" data-bs-toggle="modal" [attr.data-bs-target]="'#deleteStaticBackdrop' + i"></i>
            </div>
        </div>
        <div class="d-flex flex-column justify-content-between">
            <div class="d-flex flrx-row card-body justify-content-evenly">
                <p>Game name: {{g.name}}</p>
                <p>Publication date: {{g.date | date: 'fullDate'}}</p>
                <p>Price {{g.price}}</p>
            </div>
            <div class="d-flex flrx-row card-body justify-content-around">
                <p>Editor name: {{g.editorDTO.name}}</p>
                <p>min game time - max game time: {{g.minGameTime}}-{{g.maxGameTime}}</p>
                <p>min player - max player: {{g.minPlayerNumber}}-{{g.maxPlayerNumber}}</p>
                <p>Minimum: {{g.minAge}}</p>
            </div>
            <a class="m-2" data-bs-toggle="collapse" href="#collapseExample{{i}}">Description <i class="bi bi-caret-down-fill"></i></a>
            <div class="collapse" id="collapseExample{{i}}">
                <div class="card card-body m-2">
                    <div class="d-flex justify-content-start">
                        <p class="card-text ">{{g.description}}</p>
                    </div>
            </div>
            <div class="d-flex flrx-row card-body"></div>
        </div> 
    </div>
    <!--Modal-->
    <div class="modal fade" id="staticBackdrop{{i}}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="staticBackdropLabel">You are trying to modify game: {{g.name}}</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="mb-3">
                            <label for="GamesName" class="form-label">Game name</label>
                            <input type="text" class="form-control" id="gameName" name="gameName"[(ngModel)]="gameName">

                            <label for="publicationDate" class="form-label">Publication Date</label>
                            <input type="text" class="form-control" id="publicationDate" name="publicationDate" [(ngModel)]="gameDate">

                            <label for="description" class="form-label">Description</label>
                            <input type="text" class="form-control" id="description" name="description" [(ngModel)]="gameDescription">

                            <div class="d-flex flex-row justify-content-between">
                                <div>
                                    <label for="minTime" class="form-label">Minimum game time</label>
                                    <input type="number" class="form-control" id="minTime" name="minTime" [(ngModel)]="gameMinTime">
                                </div>
                                <div>
                                    <label for="maxTime" class="form-label">Maximum game time</label>
                                    <input type="number" class="form-control" id="maxTime" name="maxTime" [(ngModel)]="gameMaxTime">
                                </div>
                            </div>
                            <div class="d-flex flex-row justify-content-between">
                                <div>
                                    <label for="minPlayerNumber" class="form-label">Minimum player</label>
                                    <input type="number" class="form-control" id="minPlayerNumber" name="minPlayerNumber" [(ngModel)]="gameMinPlayerNumber">
                                </div>
                                <div>
                                    <label for="maxPlayernumber" class="form-label">Maximum player</label>
                                    <input type="number" class="form-control" id="maxPlayerNumber" name="maxPlayerNumber" [(ngModel)]="gameMaxPlayerNumber">
                                </div>
                            </div>
                            <div class="d-flex flex-row justify-content-between">
                                <div>
                                    <label for="minAge" class="form-label">minimum age</label>
                                    <input type="number" class="form-control" id="minAge" name="minAge"
                                        [(ngModel)]="gameMinAge">
                                </div>
                                <div>
                                    <label for="price" class="form-label">Price</label>
                                    <input type="number" class="form-control" id="price" name="price"
                                        [(ngModel)]="gamePrice">
                                </div>
                            </div>
                            <label for="editorsId" class="form-label">Id editor</label>
                            <input type="number" class="form-control" id="editorsId" name="editorsId" [(ngModel)]="gameEditorsId">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" data-bs-dismiss="modal" class="btn btn-primary"data-bs-dismiss="modal"
                        (click)="saveUpdateGame(g.id, gameName,gameDate,gameDescription,gameMinTime,gameMaxTime,
                                                gameMinPlayerNumber,gameMaxPlayerNumber,gameMinAge,gamePrice,gameEditorsId)">Update</button>
                </div>
            </div>
        </div>
    </div>
    <!--Delete Modal-->
    <div class="modal fade" id="deleteStaticBackdrop{{i}}" tabindex="-1" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="exampleModalLabel">Delete the Game?</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        Attenction! You want delete the game {{g.name}}
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="button" class="btn btn-danger" data-bs-dismiss="modal" (click)="deleteGame(g.id)">Delete</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- create Modal-->
<div class="modal fade" id="createModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="staticBackdropLabel">Create new game</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="mb-3">
                        <label for="GamesName" class="form-label">Game name</label>
                        <input type="text" class="form-control" id="gameName" name="gameName" [(ngModel)]="name">

                        <label for="publicationDate" class="form-label">Publication date</label>
                        <input type="text" class="form-control" id="publicationDate" name="publicationDate"
                            [(ngModel)]="date">

                        <label for="description" class="form-label">Description</label>
                        <input type="text" class="form-control" id="description" name="description"
                            [(ngModel)]="description">

                        <div class="d-flex flex-row justify-content-between">
                            <div>
                                <label for="minTime" class="form-label">minimum game time</label>
                                <input type="number" class="form-control" id="minTime" name="minTime"
                                    [(ngModel)]="minGameTime">
                            </div>
                            <div>
                                <label for="maxTime" class="form-label">maximum game time</label>
                                <input type="number" class="form-control" id="maxTime" name="maxTime"
                                    [(ngModel)]="maxGameTime">
                            </div>
                        </div>
                        <div class="d-flex flex-row justify-content-between">
                            <div>
                                <label for="minPlayerNumber" class="form-label">minimum players</label>
                                <input type="number" class="form-control" id="minPlayerNumber" name="minPlayerNumber"
                                    [(ngModel)]="minPlayerNumber">
                            </div>
                            <div>
                                <label for="maxPlayernumber" class="form-label">Maximum players</label>
                                <input type="number" class="form-control" id="maxPlayerNumber" name="maxPlayerNumber"
                                    [(ngModel)]="maxPlayerNumber">
                            </div>
                        </div>
                        <div class="d-flex flex-row justify-content-between">
                            <div>
                                <label for="minAge" class="form-label">Minimum age</label>
                                <input type="number" class="form-control" id="minAge" name="minAge"
                                    [(ngModel)]="minAge">
                            </div>
                            <div>
                                <label for="price" class="form-label">Price</label>
                                <input type="number" class="form-control" id="price" name="price" [(ngModel)]="price">
                            </div>
                        </div>
                        <label for="stockQuantity" class="form-label">Stock quantity</label>
                        <input type="number" class="form-control" id="stockQuantity" name="stockQuantity" [(ngModel)]="stockQuantity">
                        <label for="editorsId" class="form-label">Id editor</label>
                        <input type="number" class="form-control" id="editorsId" name="editorsId"
                            [(ngModel)]="editorsId">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancel</button>
                <button type="button" data-bs-dismiss="modal" class="btn btn-success" data-bs-dismiss="modal"
                    (click)="createGames(name, date, description, minGameTime, maxGameTime, minPlayerNumber, maxPlayerNumber, minAge, stockQuantity,price,editorsId)">Create</button>
            </div>
        </div>
    </div>
</div>